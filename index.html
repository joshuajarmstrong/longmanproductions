<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Longman Productions</title>

<style>
  :root{
    --scan: rgba(255,255,255,0.028);
    --noise: rgba(255,255,255,0.03);
  }

  html, body {
    height: 100%;
  }

  body{
    margin:0;
    background:#000;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    animation: fadein 1.8s ease forwards;
    opacity: 0;
  }

  @keyframes fadein { to { opacity:1; } }

  /* projector flash */
  .flash{
    position:fixed;
    inset:0;
    background:#fff;
    opacity:0;
    pointer-events:none;
    animation: flash 900ms ease-out 1;
  }
  @keyframes flash{
    0%{opacity:0}
    8%{opacity:.55}
    18%{opacity:.12}
    100%{opacity:0}
  }

  /* vignette */
  .vignette{
    position:fixed;
    inset:-20%;
    pointer-events:none;
    background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,.35) 55%, rgba(0,0,0,.7) 100%);
  }

  /* CRT scanlines + slight noise */
  .crt{
    position:fixed;
    inset:0;
    pointer-events:none;
    background:
      repeating-linear-gradient(
        to bottom,
        var(--scan),
        var(--scan) 1px,
        transparent 2px,
        transparent 5px
      );
    mix-blend-mode: screen;
    opacity: .85;
  }
  .grain{
    position:fixed;
    inset:0;
    pointer-events:none;
    background-image:
      radial-gradient(var(--noise) 1px, transparent 1px);
    background-size: 3px 3px;
    opacity:.18;
    animation: grain 8s steps(2,end) infinite;
  }
  @keyframes grain{
    0%{transform:translate(0,0)}
    20%{transform:translate(-2%, 1%)}
    40%{transform:translate(1%, -2%)}
    60%{transform:translate(2%, 2%)}
    80%{transform:translate(-1%, -1%)}
    100%{transform:translate(0,0)}
  }

  /* main figure wrapper */
  .wrap{
    position:relative;
    width:min(80vw, 900px);
    height:min(80vh, 900px);
    display:flex;
    align-items:center;
    justify-content:center;
    transform-style: preserve-3d;
    will-change: transform, filter;
  }

  img{
    max-width:100%;
    max-height:100%;
    user-select:none;
    -webkit-user-drag:none;
    display:block;
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.06));
    transform: translate3d(0,0,0);
    will-change: transform, filter;
  }

  /* gentle idle flicker */
  .idle{
    animation: idleFlicker 9s infinite;
  }
  @keyframes idleFlicker{
    0%, 96%, 100% { transform:translate3d(0,0,0); opacity:1; filter: drop-shadow(0 0 10px rgba(255,255,255,0.06)); }
    97% { transform:translate3d(-2px, 1px,0); opacity:.92; filter: drop-shadow(0 0 14px rgba(255,255,255,0.08)); }
    98% { transform:translate3d(2px, -1px,0); opacity:.86; }
    99% { transform:translate3d(-1px, -2px,0); opacity:.94; }
  }

  /* hover distortion "split" layers */
  .layer{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    opacity:0;
    pointer-events:none;
    mix-blend-mode: screen;
    transition: opacity 250ms ease;
  }
  .layer.red { filter: hue-rotate(0deg) saturate(2); transform: translate3d(-2px,0,0); }
  .layer.cyan{ filter: hue-rotate(180deg) saturate(2); transform: translate3d(2px,0,0); }

  .wrap:hover .layer{
    opacity:.45;
  }

  /* signal drop overlay */
  .drop{
    position:fixed;
    inset:0;
    pointer-events:none;
    background:#000;
    opacity:0;
  }
  .drop.on{
    animation: drop 260ms ease-in-out 1;
  }
  @keyframes drop{
    0%{opacity:0}
    30%{opacity:.65}
    100%{opacity:0}
  }

  /* email reveal */
.email{
  position:fixed;
  left:0;
  top:0;
  transform:translate(-50%,-50%);
  color:rgba(255,255,255,.9);
  font-size:14px;
  letter-spacing:0.08em;
  background: rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.15);
  padding:8px 10px;
  border-radius:999px;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  pointer-events:auto;
  opacity:0;
  transition:
    opacity .25s ease,
    transform .08s linear;
  white-space:nowrap;
}
  .email.show{
    opacity:1;
    pointer-events:auto;
    transform:translateX(-50%) translateY(-2px);
  }
  .email a{
    color:rgba(255,255,255,.95);
    text-decoration:none;
  }
  .email a:hover{ text-decoration: underline; }

  .hint{
    position:fixed;
    left:50%;
    top:22px;
    transform:translateX(-50%);
    color:rgba(255,255,255,.45);
    font-size:12px;
    letter-spacing:0.12em;
    text-transform:uppercase;
    opacity:.0;
    transition: opacity 400ms ease;
    pointer-events:none;
  }
  .hint.show{ opacity:1; }

  /* accessibility */
  @media (prefers-reduced-motion: reduce){
    *{ animation: none !important; transition:none !important; }
    body{ opacity:1; }
    .wrap, img{ transform:none !important; }
  }
</style>
</head>

<body>
  <div class="flash"></div>
  <div class="drop" id="drop"></div>

  <div class="wrap" id="wrap" aria-label="Longman Productions">
    <img id="mainImg" class="idle" src="longman.png" alt="Long Man of Wilmington (glitched)" />
    <!-- hover split layers -->
    <div class="layer red" aria-hidden="true"><img src="longman.png" alt="" /></div>
    <div class="layer cyan" aria-hidden="true"><img src="longman.png" alt="" /></div>
  </div>

  <div class="hint" id="hint">click to reveal contact</div>

  <div class="email" id="email">
    <a href="mailto:hello@longmanproductions.uk">hello@longmanproductions.uk</a>
    <span id="copied" style="display:none; margin-left:10px; opacity:.7;">copied</span>
  </div>

  <div class="vignette"></div>
  <div class="crt"></div>
  <div class="grain"></div>

<script>
(() => {
  const wrap = document.getElementById('wrap');
  const img = document.getElementById('mainImg');
  const email = document.getElementById('email');
  const hint = document.getElementById('hint');
  const drop = document.getElementById('drop');
  const copied = document.getElementById('copied');

  // --- Hover distortion / cursor-reactive jitter ---
  let targetX = 0, targetY = 0;
  let currentX = 0, currentY = 0;

  function lerp(a,b,t){ return a + (b-a)*t; }

  function onMove(e){
    const r = wrap.getBoundingClientRect();
    const cx = r.left + r.width/2;
    const cy = r.top + r.height/2;
    const dx = (e.clientX - cx) / (r.width/2);
    const dy = (e.clientY - cy) / (r.height/2);
    targetX = Math.max(-1, Math.min(1, dx));
    targetY = Math.max(-1, Math.min(1, dy));

    hint.classList.add('show');
  }

  function onLeave(){
    targetX = 0; targetY = 0;
    hint.classList.remove('show');
  }

  // animation loop
  function tick(){
    currentX = lerp(currentX, targetX, 0.08);
    currentY = lerp(currentY, targetY, 0.08);

    // small parallax tilt + micro jitter
    const rotY = currentX * 6;   // degrees
    const rotX = -currentY * 6;
    const tx = currentX * 6;     // px
    const ty = currentY * 6;

    wrap.style.transform = `translate3d(${tx}px, ${ty}px, 0) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
    img.style.filter = `drop-shadow(0 0 ${10 + Math.abs(currentX+currentY)*10}px rgba(255,255,255,0.07))`;

    requestAnimationFrame(tick);
  }

  wrap.addEventListener('mousemove', onMove);
  wrap.addEventListener('mouseleave', onLeave);
  tick();

  // --- Click to reveal email + copy to clipboard ---
  let emailVisible = false;

  function showEmail(){
    emailVisible = !emailVisible;
    email.classList.toggle('show', emailVisible);
    hint.classList.toggle('show', !emailVisible);
  }

  wrap.addEventListener('click', showEmail);

  email.addEventListener('click', async (e) => {
    // don't block mailto, but also copy on click
    try {
      await navigator.clipboard.writeText('hello@longmanproductions.uk');
      copied.style.display = 'inline';
      setTimeout(() => copied.style.display = 'none', 900);
    } catch (_) {
      // ignore if clipboard blocked
    }
  });

  // --- Random signal drop (rare) ---
  function signalDrop(){
    drop.classList.add('on');
    setTimeout(() => drop.classList.remove('on'), 300);
  }

  // roughly every 20â€“45s
  function scheduleDrop(){
    const ms = 20000 + Math.random() * 25000;
    setTimeout(() => {
      signalDrop();
      scheduleDrop();
    }, ms);
  }
  scheduleDrop();

  // --- Mobile gyroscope drift ---
  // iOS requires permission after user interaction
  async function enableGyro(){
    if (!window.DeviceOrientationEvent) return;

    // iOS permission gate
    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
      try {
        const res = await DeviceOrientationEvent.requestPermission();
        if (res !== 'granted') return;
      } catch (_) { return; }
    }

    window.addEventListener('deviceorientation', (ev) => {
      // gamma: left/right, beta: front/back
      const g = Math.max(-30, Math.min(30, ev.gamma || 0));
      const b = Math.max(-30, Math.min(30, ev.beta || 0));
      // gentle drift contribution
      targetX = (g / 30) * 0.35;
      targetY = (b / 30) * 0.35;
    }, { passive: true });
  }

  // enable gyro on first tap/click anywhere (mobile-friendly)
  window.addEventListener('click', enableGyro, { once: true });

})();
</script>
</body>
</html>
