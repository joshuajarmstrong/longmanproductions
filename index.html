<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Longman Productions</title>

<style>
  :root{
    --scan: rgba(255,255,255,0.028);
    --noise: rgba(255,255,255,0.03);
  }

  html, body { height: 100%; }

  body{
    margin:0;
    background:#000;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    animation: fadein 1.8s ease forwards;
    opacity: 0;
    user-select:none;
  }
  @keyframes fadein { to { opacity:1; } }

  /* projector flash */
  .flash{
    position:fixed;
    inset:0;
    background:#fff;
    opacity:0;
    pointer-events:none;
    animation: flash 900ms ease-out 1;
  }
  @keyframes flash{
    0%{opacity:0}
    8%{opacity:.55}
    18%{opacity:.12}
    100%{opacity:0}
  }

  /* vignette */
  .vignette{
    position:fixed;
    inset:-20%;
    pointer-events:none;
    background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,.35) 55%, rgba(0,0,0,.7) 100%);
  }

  /* CRT scanlines + slight noise */
  .crt{
    position:fixed;
    inset:0;
    pointer-events:none;
    background:
      repeating-linear-gradient(
        to bottom,
        var(--scan),
        var(--scan) 1px,
        transparent 2px,
        transparent 5px
      );
    mix-blend-mode: screen;
    opacity: .85;
  }
  .grain{
    position:fixed;
    inset:0;
    pointer-events:none;
    background-image: radial-gradient(var(--noise) 1px, transparent 1px);
    background-size: 3px 3px;
    opacity:.18;
    animation: grain 8s steps(2,end) infinite;
  }
  @keyframes grain{
    0%{transform:translate(0,0)}
    20%{transform:translate(-2%, 1%)}
    40%{transform:translate(1%, -2%)}
    60%{transform:translate(2%, 2%)}
    80%{transform:translate(-1%, -1%)}
    100%{transform:translate(0,0)}
  }

  /* main figure wrapper */
  .wrap{
    position:relative;
    width:min(80vw, 900px);
    height:min(80vh, 900px);
    display:flex;
    align-items:center;
    justify-content:center;
    transform-style: preserve-3d;
    will-change: transform, filter;
    cursor: pointer;
  }

  img{
    max-width:100%;
    max-height:100%;
    user-select:none;
    -webkit-user-drag:none;
    display:block;
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.06));
    transform: translate3d(0,0,0);
    will-change: transform, filter;
  }

  /* gentle idle flicker */
  .idle{
    animation: idleFlicker 9s infinite;
  }
  @keyframes idleFlicker{
    0%, 96%, 100% { transform:translate3d(0,0,0); opacity:1; filter: drop-shadow(0 0 10px rgba(255,255,255,0.06)); }
    97% { transform:translate3d(-2px, 1px,0); opacity:.92; filter: drop-shadow(0 0 14px rgba(255,255,255,0.08)); }
    98% { transform:translate3d(2px, -1px,0); opacity:.86; }
    99% { transform:translate3d(-1px, -2px,0); opacity:.94; }
  }

  /* hover distortion "split" layers (subtle) */
  .layer{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    opacity:0;
    pointer-events:none;
    mix-blend-mode: screen;
    transition: opacity 250ms ease;
  }
  .layer.red { filter: hue-rotate(0deg) saturate(2); transform: translate3d(-2px,0,0); }
  .layer.cyan{ filter: hue-rotate(180deg) saturate(2); transform: translate3d(2px,0,0); }
  .wrap:hover .layer{ opacity:.35; }

  /* signal drop overlay */
  .drop{
    position:fixed;
    inset:0;
    pointer-events:none;
    background:#000;
    opacity:0;
  }
  .drop.on{ animation: drop 260ms ease-in-out 1; }
  @keyframes drop{
    0%{opacity:0}
    30%{opacity:.65}
    100%{opacity:0}
  }

  /* OLD LABEL CAPTION email (square, semi-transparent) */
  .email{
    position: fixed;
    left: 0;
    top: 0;

    opacity: 0;
    pointer-events: none;
    white-space: nowrap;

    border-radius: 0;
    background: rgba(0,0,0,0.28);
    border: 1px solid rgba(255,255,255,0.26);
    box-shadow:
      0 0 0 1px rgba(0,0,0,0.7),
      0 10px 30px rgba(0,0,0,0.25);

    padding: 10px 14px;

    color: rgba(255,248,235,0.92);

    font-family: "Iowan Old Style","Palatino Linotype",Palatino,"Book Antiqua",Georgia,"Times New Roman",serif;
    font-size: 15px;
    letter-spacing: 0.14em;
    font-variant: small-caps;

    backdrop-filter: none;
    -webkit-backdrop-filter: none;

    user-select: text;
    will-change: left, top, opacity;
  }
  .email.show{
    opacity: 1;
    pointer-events: auto;
  }
  .email a{
    color: rgba(255,248,235,0.95);
    text-decoration: none;
  }
  .email a:hover{
    text-decoration: underline;
  }
  .copied{
    display:none;
    margin-left:12px;
    opacity:.75;
    letter-spacing: .10em;
    font-variant: normal;
    text-transform: uppercase;
    font-size: 11px;
  }

  @media (prefers-reduced-motion: reduce){
    *{ animation: none !important; transition:none !important; }
    body{ opacity:1; }
    .wrap, img{ transform:none !important; }
  }
</style>
</head>

<body>
  <div class="flash"></div>
  <div class="drop" id="drop"></div>

  <div class="wrap" id="wrap" aria-label="Longman Productions (click for contact)">
    <img id="mainImg" class="idle" src="longman.png" alt="Long Man of Wilmington (glitched)" />
    <div class="layer red" aria-hidden="true"><img src="longman.png" alt="" /></div>
    <div class="layer cyan" aria-hidden="true"><img src="longman.png" alt="" /></div>
  </div>

  <div class="email" id="email">
    <a href="mailto:hello@longmanproductions.uk">hello@longmanproductions.uk</a>
    <span class="copied" id="copied">copied</span>
  </div>

  <div class="vignette"></div>
  <div class="crt"></div>
  <div class="grain"></div>

<script>
(() => {
  const wrap  = document.getElementById('wrap');
  const img   = document.getElementById('mainImg');
  const email = document.getElementById('email');
  const copied= document.getElementById('copied');
  const drop  = document.getElementById('drop');

  const EMAIL = 'hello@longmanproductions.uk';

  const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
  const lerp  = (a,b,t) => a + (b-a)*t;

  // ---------------------------
  // Parallax on figure
  // ---------------------------
  let targetX = 0, targetY = 0;
  let currentX = 0, currentY = 0;

  function onMoveParallax(x, y){
    const r = wrap.getBoundingClientRect();
    const cx = r.left + r.width/2;
    const cy = r.top + r.height/2;
    const dx = (x - cx) / (r.width/2);
    const dy = (y - cy) / (r.height/2);
    targetX = clamp(dx, -1, 1);
    targetY = clamp(dy, -1, 1);
  }

  function tickParallax(){
    currentX = lerp(currentX, targetX, 0.08);
    currentY = lerp(currentY, targetY, 0.08);

    const rotY = currentX * 6;
    const rotX = -currentY * 6;
    const tx = currentX * 6;
    const ty = currentY * 6;

    wrap.style.transform = `translate3d(${tx}px, ${ty}px, 0) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
    img.style.filter = `drop-shadow(0 0 ${10 + Math.abs(currentX+currentY)*10}px rgba(255,255,255,0.07))`;

    requestAnimationFrame(tickParallax);
  }
  tickParallax();

  // ---------------------------
  // Email: click to toggle; follows mouse while visible
  // Freezes when hovered so it's easy to click
  // ---------------------------
  let emailVisible = false;
  let freezeEmail = false;

  let mouseX = window.innerWidth / 2;
  let mouseY = window.innerHeight / 2;

  let emailX = mouseX;
  let emailY = mouseY;

  function setEmailVisible(v){
    emailVisible = v;
    email.classList.toggle('show', v);
  }

  wrap.addEventListener('click', () => {
    setEmailVisible(!emailVisible);
  });

  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') setEmailVisible(false);
  });

  document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
    onMoveParallax(mouseX, mouseY);
  }, { passive:true });

  email.addEventListener('mouseenter', () => { freezeEmail = true; });
  email.addEventListener('mouseleave', () => { freezeEmail = false; });

  function tickEmail(){
    if (emailVisible && !freezeEmail){
      emailX = lerp(emailX, mouseX, 0.16);
      emailY = lerp(emailY, mouseY, 0.16);

      const ox = 18, oy = 22;
      email.style.left = (emailX + ox) + "px";
      email.style.top  = (emailY + oy) + "px";
    }
    requestAnimationFrame(tickEmail);
  }
  tickEmail();

  // Copy on click (and the mailto link still works)
  email.addEventListener('click', async () => {
    try{
      await navigator.clipboard.writeText(EMAIL);
      copied.style.display = 'inline';
      setTimeout(() => copied.style.display = 'none', 900);
    }catch(_){}
  });

  // ---------------------------
  // Random signal drop (rare)
  // ---------------------------
  function signalDrop(){
    drop.classList.add('on');
    setTimeout(() => drop.classList.remove('on'), 300);
  }
  function scheduleDrop(){
    const ms = 20000 + Math.random() * 25000; // 20â€“45s
    setTimeout(() => { signalDrop(); scheduleDrop(); }, ms);
  }
  scheduleDrop();
})();
</script>
</body>
</html>
